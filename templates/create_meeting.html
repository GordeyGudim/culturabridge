{% extends "base.html" %}

{% block title %}Создать встречу - CulturaBridge{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-header">
                    <h2 class="mb-0">Создать новую встречу</h2>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ url_for('create_meeting') }}">
                        <div class="mb-3">
                            <label for="title" class="form-label">Название встречи *</label>
                            <input type="text" class="form-control" id="title" name="title" 
                                   required placeholder="Введите название встречи">
                        </div>
                        
                        <div class="mb-3">
                            <label for="description" class="form-label">Описание</label>
                            <textarea class="form-control" id="description" name="description" 
                                      rows="4" placeholder="Опишите цель встречи..."></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="topic" class="form-label">Тема</label>
                                    <input type="text" class="form-control" id="topic" name="topic" 
                                           value="Общий" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="language" class="form-label">Язык</label>
                                    <select class="form-select" id="language" name="language" required>
                                        <option value="Русский">Русский</option>
                                        <option value="Английский">Английский</option>
                                        <option value="Испанский">Испанский</option>
                                        <option value="Французский">Французский</option>
                                        <option value="Немецкий">Немецкий</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="level" class="form-label">Уровень</label>
                                    <select class="form-select" id="level" name="level" required>
                                        <option value="Начинающий">Начинающий</option>
                                        <option value="Средний">Средний</option>
                                        <option value="Продвинутый">Продвинутый</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="scheduled_time" class="form-label">Дата и время</label>
                                    <input type="datetime-local" class="form-control" id="scheduled_time" 
                                           name="scheduled_time" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="max_participants" class="form-label">Макс. участников</label>
                            <input type="number" class="form-control" id="max_participants" 
                                   name="max_participants" value="6" min="2" max="20">
                        </div>
                        <div class="mb-3">
                            <label for="telemost_link" class="form-label">
                                <i class="fas fa-link"></i> Ссылка на Яндекс.Телемост
                            </label>
                            <input type="url" 
                                class="form-control" 
                                id="telemost_link" 
                                name="telemost_link"
                                placeholder="https://telemost.yandex.ru/j/xxxxxxxxxx"
                                pattern="https://.*">
                            <div class="form-text">
                                Создайте встречу в <a href="https://telemost.yandex.ru" target="_blank">Яндекс.Телемост</a> и вставьте ссылку
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-between">
                            <a href="{{ url_for('my_meetings') }}" class="btn btn-secondary">Отмена</a>
                            <button type="submit" class="btn btn-primary">Создать встречу</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Установить дату и время по умолчанию (завтра, 19:00)
document.addEventListener('DOMContentLoaded', function() {
    const now = new Date();
    const tomorrow = new Date(now);
    tomorrow.setDate(tomorrow.getDate() + 1);
    tomorrow.setHours(19, 0, 0, 0);
    
    // Форматирование для datetime-local
    const year = tomorrow.getFullYear();
    const month = String(tomorrow.getMonth() + 1).padStart(2, '0');
    const day = String(tomorrow.getDate()).padStart(2, '0');
    const hours = String(tomorrow.getHours()).padStart(2, '0');
    const minutes = String(tomorrow.getMinutes()).padStart(2, '0');
    
    document.getElementById('scheduled_time').value = 
        `${year}-${month}-${day}T${hours}:${minutes}`;
});
</script>
{% endblock %}
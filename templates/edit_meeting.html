{% extends "base.html" %}

{% block title %}Редактировать встречу - CulturaBridge{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-header">
                    <h2 class="mb-0">Редактировать встречу</h2>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ url_for('edit_meeting', meeting_id=meeting.id) }}">
                        <div class="mb-3">
                            <label for="title" class="form-label">Название встречи *</label>
                            <input type="text" class="form-control" id="title" name="title" 
                                   value="{{ meeting.title }}" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="description" class="form-label">Описание</label>
                            <textarea class="form-control" id="description" name="description" 
                                      rows="4">{{ meeting.description }}</textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="topic" class="form-label">Тема</label>
                                    <input type="text" class="form-control" id="topic" name="topic" 
                                           value="{{ meeting.topic }}" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="language" class="form-label">Язык</label>
                                    <select class="form-select" id="language" name="language" required>
                                        <option value="Русский" {% if meeting.language == 'Русский' %}selected{% endif %}>Русский</option>
                                        <option value="Английский" {% if meeting.language == 'Английский' %}selected{% endif %}>Английский</option>
                                        <option value="Испанский" {% if meeting.language == 'Испанский' %}selected{% endif %}>Испанский</option>
                                        <option value="Французский" {% if meeting.language == 'Французский' %}selected{% endif %}>Французский</option>
                                        <option value="Немецкий" {% if meeting.language == 'Немецкий' %}selected{% endif %}>Немецкий</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="level" class="form-label">Уровень</label>
                                    <select class="form-select" id="level" name="level" required>
                                        <option value="Начинающий" {% if meeting.level == 'Начинающий' %}selected{% endif %}>Начинающий</option>
                                        <option value="Средний" {% if meeting.level == 'Средний' %}selected{% endif %}>Средний</option>
                                        <option value="Продвинутый" {% if meeting.level == 'Продвинутый' %}selected{% endif %}>Продвинутый</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="max_participants" class="form-label">Макс. участников</label>
                                    <input type="number" class="form-control" id="max_participants" 
                                           name="max_participants" value="{{ meeting.max_participants }}" 
                                           min="2" max="20">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="scheduled_time" class="form-label">Дата и время *</label>
                                    <input type="datetime-local" class="form-control" id="scheduled_time" 
                                           name="scheduled_time" 
                                           value="{{ meeting.scheduled_time.strftime('%Y-%m-%dT%H:%M') }}" 
                                           required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="duration" class="form-label">Длительность (минут)</label>
                                    <input type="number" class="form-control" id="duration" 
                                           name="duration" value="{{ meeting.duration }}" min="15" max="240">
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="is_active" class="form-label">Статус</label>
                            <select class="form-select" id="is_active" name="is_active">
                                <option value="true" {% if meeting.is_active %}selected{% endif %}>Активна</option>
                                <option value="false" {% if not meeting.is_active %}selected{% endif %}>Неактивна</option>
                            </select>
                        </div>
                        
                        <div class="d-flex justify-content-between">
                            <a href="{{ url_for('meeting_detail', meeting_id=meeting.id) }}" 
                               class="btn btn-secondary">Отмена</a>
                            <button type="submit" class="btn btn-primary">Сохранить изменения</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}